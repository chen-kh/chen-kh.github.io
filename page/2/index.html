<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="Java, Python, C, Go language">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="../../atom.xml" title="其鬼不神" type="application/atom+xml" />






<meta name="description" content="道莅天下，其鬼不神">
<meta name="keywords" content="分布式系统，数据结构与算法，操作系统与网络，编程语言与设计模式">
<meta property="og:type" content="website">
<meta property="og:title" content="其鬼不神">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="其鬼不神">
<meta property="og:description" content="道莅天下，其鬼不神">
<meta property="og:locale" content="Java, Python, C, Go language">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="其鬼不神">
<meta name="twitter:description" content="道莅天下，其鬼不神">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>其鬼不神</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="Java, Python, C, Go language">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">其鬼不神</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">ACT北航愣头青的博客</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            Schedule
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br />
            
            Sitemap
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com../../2018/04/19/notebook/data_struc_algo/跳跃表/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaiheng CHEN">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../timg.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="其鬼不神">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2018/04/19/notebook/data_struc_algo/跳跃表/" itemprop="url">数据结构：跳跃表</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-19T16:54:43+08:00">
                2018-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/数据结构/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="数据结构：跳跃表"><a href="#数据结构：跳跃表" class="headerlink" title="数据结构：跳跃表"></a>数据结构：跳跃表</h1><p>参考：</p>
<ul>
<li><a href="http://www.duyongfeng.com/2016/12/22/%E8%B7%B3%E8%B7%83%E5%88%97%E8%A1%A8-Skip-list-%E5%8E%9F%E7%90%86%E5%92%8C%E5%AE%9E%E7%8E%B0/" target="_blank" rel="noopener">跳跃列表(Skip list)原理和实现</a></li>
<li><a href="https://www.ezlippi.com/blog/2014/12/skip-list.html" target="_blank" rel="noopener">skip list跳跃表实现</a></li>
</ul>
<h2 id="看图识表"><a href="#看图识表" class="headerlink" title="看图识表"></a>看图识表</h2><p>其实就是每个节点都存储一个动态的数组，充当索引的角色。</p>
<p><img src="skiplist.png" alt="跳跃表"></p>
<h2 id="数据结构分析"><a href="#数据结构分析" class="headerlink" title="数据结构分析"></a>数据结构分析</h2><h2 id="实现代码"><a href="#实现代码" class="headerlink" title="实现代码"></a>实现代码</h2><p>代码来自：<a href="http://www.duyongfeng.com/2016/12/22/%E8%B7%B3%E8%B7%83%E5%88%97%E8%A1%A8-Skip-list-%E5%8E%9F%E7%90%86%E5%92%8C%E5%AE%9E%E7%8E%B0/" target="_blank" rel="noopener">跳跃列表(Skip list)原理和实现</a><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SkipNode</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">	K k;</span><br><span class="line">	V v;</span><br><span class="line">	SkipNode&lt;K, V&gt;[] forward;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">SkipNode</span><span class="params">(K k, V v, <span class="keyword">int</span> level)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.k = k;</span><br><span class="line">		<span class="keyword">this</span>.v = v;</span><br><span class="line">		forward = (SkipNode&lt;K, V&gt;[]) <span class="keyword">new</span> SkipNode[level + <span class="number">1</span>];</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; level; i++) &#123;</span><br><span class="line">			forward[i] = <span class="keyword">null</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"SkipNode [k="</span> + k + <span class="string">", v="</span> + v + <span class="string">", forward="</span> + Arrays.toString(forward) + <span class="string">"]"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SkipList</span>&lt;<span class="title">K</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;? <span class="title">super</span> <span class="title">K</span>&gt;, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">	SkipNode&lt;K, V&gt; head;</span><br><span class="line">	<span class="keyword">int</span> level;</span><br><span class="line">	<span class="keyword">int</span> size;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">SkipList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		head = <span class="keyword">new</span> SkipNode&lt;K, V&gt;(<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="number">0</span>);</span><br><span class="line">		<span class="comment">// 刚开始只有一层，也就是第0层</span></span><br><span class="line">		level = <span class="number">0</span>;</span><br><span class="line">		size = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@Description</span>:随机生成层数</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span>:int</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">randomLevel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> lev;</span><br><span class="line">		<span class="keyword">for</span> (lev = <span class="number">1</span>; Util.random(<span class="number">2</span>) == <span class="number">0</span>; lev++)</span><br><span class="line">			;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> lev;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(K k, V v)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> newLevel = randomLevel();</span><br><span class="line">		<span class="comment">// 调整头节点</span></span><br><span class="line">		<span class="keyword">if</span> (newLevel &gt; level) &#123;</span><br><span class="line">			SkipNode&lt;K, V&gt; tmp = head;</span><br><span class="line">			head = <span class="keyword">new</span> SkipNode&lt;K, V&gt;(<span class="keyword">null</span>, <span class="keyword">null</span>, newLevel);</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; tmp.forward.length; i++) &#123;</span><br><span class="line">				head.forward[i] = tmp.forward[i];</span><br><span class="line">			&#125;</span><br><span class="line">			level = newLevel;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">		SkipNode&lt;K, V&gt;[] update = <span class="keyword">new</span> SkipNode[level + <span class="number">1</span>];</span><br><span class="line">		SkipNode&lt;K, V&gt; x = head;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = level; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">			<span class="keyword">while</span> (x.forward[i] != <span class="keyword">null</span> &amp;&amp; x.forward[i].k.compareTo(k) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">				x = x.forward[i];</span><br><span class="line">			&#125;</span><br><span class="line">			update[i] = x;</span><br><span class="line">		&#125;</span><br><span class="line">		x = x.forward[<span class="number">0</span>];</span><br><span class="line">		<span class="keyword">if</span> (x != <span class="keyword">null</span> &amp;&amp; x.k != <span class="keyword">null</span> &amp;&amp; x.k.compareTo(k) == <span class="number">0</span>) &#123;</span><br><span class="line">			x.v = v;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			x = <span class="keyword">new</span> SkipNode&lt;K, V&gt;(k, v, newLevel);</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; newLevel; i++) &#123;</span><br><span class="line">				x.forward[i] = update[i].forward[i];</span><br><span class="line">				update[i].forward[i] = x;</span><br><span class="line">			&#125;</span><br><span class="line">			size++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> V <span class="title">find</span><span class="params">(K k)</span> </span>&#123;</span><br><span class="line">		SkipNode&lt;K, V&gt; x = head;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = level; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">			<span class="keyword">while</span> (x.forward[i] != <span class="keyword">null</span> &amp;&amp; x.forward[i].k.compareTo(k) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">				x = x.forward[i];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		x = x.forward[<span class="number">0</span>];</span><br><span class="line">		<span class="keyword">if</span> (k.compareTo(x.k) == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span> x.v;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">delete</span><span class="params">(K k)</span> </span>&#123;</span><br><span class="line">		<span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line">		SkipNode&lt;K, V&gt;[] update = <span class="keyword">new</span> SkipNode[level + <span class="number">1</span>];</span><br><span class="line">		SkipNode&lt;K, V&gt; x = head;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = level; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">			<span class="keyword">while</span> (x.forward[i] != <span class="keyword">null</span> &amp;&amp; x.forward[i].k.compareTo(k) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">				x = x.forward[i];</span><br><span class="line">			&#125;</span><br><span class="line">			update[i] = x;</span><br><span class="line">		&#125;</span><br><span class="line">		x = x.forward[<span class="number">0</span>];</span><br><span class="line">		<span class="keyword">if</span> (k.compareTo(x.k) == <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; level; i++) &#123;</span><br><span class="line">				<span class="keyword">if</span> (update[i].forward[i] != x) &#123;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				update[i].forward[i] = x.forward[i];</span><br><span class="line">			&#125;</span><br><span class="line">			x = <span class="keyword">null</span>;</span><br><span class="line">			<span class="keyword">while</span> (level &gt; <span class="number">0</span> &amp;&amp; head.forward[level] == <span class="keyword">null</span>) &#123;</span><br><span class="line">				level = level - <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			size--;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@Description</span>:按层输出(只输出key)</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span>:void</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printKeyByLevel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		SkipNode&lt;K, V&gt; x = head;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = level - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">			System.out.print(<span class="string">"level-"</span> + i + <span class="string">":"</span>);</span><br><span class="line">			x = head.forward[<span class="number">0</span>];</span><br><span class="line">			String headCurLevelForward = head.forward[i] != <span class="keyword">null</span> ? head.forward[i].k.toString() : <span class="string">"NULL"</span>;</span><br><span class="line">			System.out.print(String.format(<span class="string">"%5s"</span>, headCurLevelForward) + <span class="string">" "</span>);</span><br><span class="line">			<span class="keyword">while</span> (x != <span class="keyword">null</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (x.forward.length &lt;= i) &#123;</span><br><span class="line">					System.out.print(String.format(<span class="string">"%5s"</span>, <span class="string">" "</span>) + <span class="string">" "</span>);</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					<span class="keyword">if</span> (x.forward[i] == <span class="keyword">null</span>) &#123;</span><br><span class="line">						System.out.print(String.format(<span class="string">"%5s"</span>, <span class="string">" "</span>) + <span class="string">" "</span>);</span><br><span class="line">					&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">						System.out.print(String.format(<span class="string">"%5s"</span>, x.forward[i].k) + <span class="string">" "</span>);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">				x = x.forward[<span class="number">0</span>];</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@Description</span>:按节点输出(只输出key)</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span>:void</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printKeyByNode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		SkipNode&lt;K, V&gt; x = head;</span><br><span class="line">		<span class="keyword">while</span> (x != <span class="keyword">null</span>) &#123;</span><br><span class="line">			System.out.print(String.format(<span class="string">"%4s forward-size-%s:"</span>, x.k == <span class="keyword">null</span> ? <span class="string">"head"</span> : x.k, x.forward.length) + <span class="string">" "</span>);</span><br><span class="line">			<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; x.forward.length; i++) &#123;</span><br><span class="line">				<span class="keyword">if</span> (x.forward[i] == <span class="keyword">null</span>) &#123;</span><br><span class="line">					System.out.print(String.format(<span class="string">"%3s"</span>, <span class="string">" "</span>) + <span class="string">" "</span>);</span><br><span class="line">				&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">					System.out.print(String.format(<span class="string">"%3s"</span>, x.forward[i].k, x.forward[i].v) + <span class="string">" "</span>);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println();</span><br><span class="line">			x = x.forward[<span class="number">0</span>];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@Description</span>: 随机数生成</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Util</span> </span>&#123;</span><br><span class="line">		<span class="keyword">static</span> Random random = <span class="keyword">new</span> Random();</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">random</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> Math.abs(random.nextInt()) % n;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SkipList&lt;Integer, Integer&gt; skipList = <span class="keyword">new</span> SkipList&lt;Integer, Integer&gt;();</span><br><span class="line">		skipList.insert(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">		skipList.insert(<span class="number">5</span>, <span class="number">5</span>);</span><br><span class="line">		skipList.insert(<span class="number">17</span>, <span class="number">17</span>);</span><br><span class="line">		skipList.insert(<span class="number">19</span>, <span class="number">19</span>);</span><br><span class="line">		skipList.insert(<span class="number">23</span>, <span class="number">23</span>);</span><br><span class="line">		skipList.insert(<span class="number">26</span>, <span class="number">26</span>);</span><br><span class="line">		skipList.insert(<span class="number">21</span>, <span class="number">21</span>);</span><br><span class="line">		System.out.println(<span class="string">"printKeyByLevel:"</span>);</span><br><span class="line">		skipList.printKeyByLevel();</span><br><span class="line">		System.out.println(<span class="string">"printKeyByNode:"</span>);</span><br><span class="line">		skipList.printKeyByNode();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com../../2018/04/19/notebook/data_struc_algo/字符串匹配算法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaiheng CHEN">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../timg.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="其鬼不神">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2018/04/19/notebook/data_struc_algo/字符串匹配算法/" itemprop="url">字符串匹配算法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-19T16:54:43+08:00">
                2018-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/数据结构与算法/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构与算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="字符串匹配算法"><a href="#字符串匹配算法" class="headerlink" title="字符串匹配算法"></a>字符串匹配算法</h1><h2 id="朴素算法"><a href="#朴素算法" class="headerlink" title="朴素算法"></a>朴素算法</h2><h2 id="KMP算法"><a href="#KMP算法" class="headerlink" title="KMP算法"></a>KMP算法</h2><p>参考资料：</p>
<ul>
<li><a href="http://wiki.jikexueyuan.com/project/kmp-algorithm/define.html" target="_blank" rel="noopener">极客学院：KMP算法</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2013/05/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm.html" target="_blank" rel="noopener">阮一峰：字符串匹配的KMP算法</a></li>
</ul>
<p>推荐关注：<strong>Robert Sedgewick</strong>老头算法讲的很清楚。有空可以一看他coursera上的课程。</p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com../../2018/04/19/notebook/data_struc_algo/stringmatchproblem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaiheng CHEN">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../timg.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="其鬼不神">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2018/04/19/notebook/data_struc_algo/stringmatchproblem/" itemprop="url">字符串匹配/包含问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-19T16:54:43+08:00">
                2018-04-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/数据结构与算法/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构与算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="字符串匹配-包含问题算法"><a href="#字符串匹配-包含问题算法" class="headerlink" title="字符串匹配/包含问题算法"></a>字符串匹配/包含问题算法</h1><h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><h2 id="普通思路"><a href="#普通思路" class="headerlink" title="普通思路"></a>普通思路</h2><h2 id="高效算法"><a href="#高效算法" class="headerlink" title="高效算法"></a>高效算法</h2>
          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com../../2018/04/12/notebook/OSMandPostGISandMapMatcher/postgresql和postgis拓展/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaiheng CHEN">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../timg.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="其鬼不神">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2018/04/12/notebook/OSMandPostGISandMapMatcher/postgresql和postgis拓展/" itemprop="url">PostGIS 学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-12T14:40:38+08:00">
                2018-04-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/postgres/" itemprop="url" rel="index">
                    <span itemprop="name">postgres</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="postgresql和postgis拓展"><a href="#postgresql和postgis拓展" class="headerlink" title="postgresql和postgis拓展"></a>postgresql和postgis拓展</h1><!-- TOC -->
<ul>
<li><a href="#1-postgresql安装">1. postgresql安装</a></li>
<li><a href="#2-postgresql使用">2. postgresql使用</a></li>
<li><a href="#3-postgis扩展安装">3. postgis扩展安装</a><ul>
<li><a href="#31-ubuntu-安装">3.1. ubuntu 安装</a></li>
<li><a href="#32-centos-7-安装">3.2. centos 7 安装</a></li>
<li><a href="#33-创建扩展">3.3. 创建扩展</a></li>
</ul>
</li>
<li><a href="#4-什么是-postgis">4. 什么是 PostGIS</a></li>
<li><a href="#5-如何使用-postgis">5. 如何使用 PostGIS</a><ul>
<li><a href="#51-简单示例">5.1. 简单示例</a></li>
<li><a href="#52-postgis的geometry数据类型">5.2. PostGIS的Geometry数据类型</a></li>
<li><a href="#53-postgis函数的分类">5.3. PostGIS函数的分类</a><ul>
<li><a href="#531-字段处理函数">5.3.1. 字段处理函数</a></li>
<li><a href="#532-几何关系函数">5.3.2. 几何关系函数</a></li>
<li><a href="#533-几何分析函数">5.3.3. 几何分析函数</a></li>
<li><a href="#534-读写函数">5.3.4. 读写函数</a></li>
</ul>
</li>
<li><a href="#54-使用postgis扩展函数">5.4. 使用PostGIS扩展函数</a><ul>
<li><a href="#541-管理类函数">5.4.1. 管理类函数</a></li>
<li><a href="#542-数据类型的输入输出函数">5.4.2. 数据类型的输入输出函数</a></li>
<li><a href="#543-量算函数">5.4.3. 量算函数</a></li>
<li><a href="#544-几何操作函数">5.4.4. 几何操作函数</a></li>
<li><a href="#545-postgis函数使用示例">5.4.5. PostGIS函数使用示例</a></li>
</ul>
</li>
<li><a href="#55-建立postgis索引">5.5. 建立PostGIS索引</a></li>
</ul>
</li>
<li><a href="#6-参考资料">6. 参考资料</a></li>
</ul>
<!-- /TOC -->
<h2 id="1-postgresql安装"><a href="#1-postgresql安装" class="headerlink" title="1. postgresql安装"></a>1. postgresql安装</h2><p>安装过程参见<a href="http://www.cnblogs.com/z-sm/archive/2016/07/05/5644165.html" target="_blank" rel="noopener">博客</a>,其中涉及到的主要问题： </p>
<ul>
<li>postgresql的版本选择问题</li>
<li>postgresql安装之后修改配置、添加用户、添加用户权限更改等等问题</li>
</ul>
<h2 id="2-postgresql使用"><a href="#2-postgresql使用" class="headerlink" title="2. postgresql使用"></a>2. postgresql使用</h2><h2 id="3-postgis扩展安装"><a href="#3-postgis扩展安装" class="headerlink" title="3. postgis扩展安装"></a>3. postgis扩展安装</h2><h3 id="3-1-ubuntu-安装"><a href="#3-1-ubuntu-安装" class="headerlink" title="3.1. ubuntu 安装"></a>3.1. ubuntu 安装</h3><p>参考：<a href="https://www.howtoing.com/how-to-install-and-configure-postgis-on-ubuntu-14-04" target="_blank" rel="noopener">博客</a>  </p>
<p><strong>注意</strong>：很多博客中的安装过程只需要 <code>apt-get install postgis</code>，实际测试发现 <code>apt-get install postgis*</code> 最好。第一种安装方式可能没有postgis-scripts，导致在数据库中<code>create extension</code>执行时出现<em>[ERROR: could not open extension control file “/usr/share/postgresql/9.3/extension/ postgis.control”: No such file or directory]</em>的错误。  </p>
<h3 id="3-2-centos-7-安装"><a href="#3-2-centos-7-安装" class="headerlink" title="3.2. centos 7 安装"></a>3.2. centos 7 安装</h3><p>参考博客：<a href="https://my.oschina.net/freegis/blog/781657" target="_blank" rel="noopener">CentOS 7 源码安装PostGIS</a>：文章写得算是很不错了，只是需要注意一下postgres这个目录，有的时候指的是你自己的postgres的安装目录。</p>
<h3 id="3-3-创建扩展"><a href="#3-3-创建扩展" class="headerlink" title="3.3. 创建扩展"></a>3.3. 创建扩展</h3><p>创建扩展：postgis安装后在使用时，需要在使用的数据库中添加拓展，在相应数据库执行<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> extension postgis</span><br></pre></td></tr></table></figure></p>
<p>出现<code>CREAT EXTENSION</code>表示安装成功，可使用一下命令查看版本。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> PostGIS_version()</span><br></pre></td></tr></table></figure></p>
<ul>
<li>具体使用见<a href="https://www.howtoing.com/how-to-install-and-configure-postgis-on-ubuntu-14-04" target="_blank" rel="noopener">博客</a></li>
</ul>
<h2 id="4-什么是-PostGIS"><a href="#4-什么是-PostGIS" class="headerlink" title="4. 什么是 PostGIS"></a>4. 什么是 PostGIS</h2><p>参考：<a href="https://postgis.net/" target="_blank" rel="noopener">PostGIS官网</a><br><strong>Wiki定义</strong>：<br>PostGIS 是一个开源程序，它为对象－关系型数据库PostgreSQL提供了存储空间地理数据的支持，使PostgreSQL成为了一个空间数据库，能够进行空间数据管理、数量测量与几何拓扑分析。PostGIS 实现了Open Geospatial Consortium所提出的基本要素类（点、线、面、多点、多线、多面等）的SQL实现参考。</p>
<h2 id="5-如何使用-PostGIS"><a href="#5-如何使用-PostGIS" class="headerlink" title="5. 如何使用 PostGIS"></a>5. 如何使用 PostGIS</h2><h3 id="5-1-简单示例"><a href="#5-1-简单示例" class="headerlink" title="5.1. 简单示例"></a>5.1. 简单示例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> demo <span class="keyword">TEMPLATE</span>=template_postgis;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> cities ( <span class="keyword">id</span> int4, <span class="keyword">name</span> <span class="built_in">varchar</span>(<span class="number">50</span>) );</span><br><span class="line"><span class="keyword">select</span> AddGeometryColumn(<span class="string">'cities'</span>,<span class="string">'the_geom'</span>,<span class="number">-1</span>,<span class="string">'GEOMETRY'</span>,<span class="number">2</span>);</span><br><span class="line"><span class="comment">/* SELECT * from cities; */</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> cities (<span class="keyword">id</span>, the_geom, <span class="keyword">name</span>) <span class="keyword">VALUES</span> (<span class="number">1</span>,ST_GeomFromText(<span class="string">'POINT(-0.1257 51.508)'</span>,<span class="number">4326</span>),<span class="string">'London, England'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> cities (<span class="keyword">id</span>, the_geom, <span class="keyword">name</span>) <span class="keyword">VALUES</span> (<span class="number">2</span>,ST_GeomFromText(<span class="string">'POINT(-81.233 42.983)'</span>,<span class="number">4326</span>),<span class="string">'London, Ontario'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> cities (<span class="keyword">id</span>, the_geom, <span class="keyword">name</span>) <span class="keyword">VALUES</span> (<span class="number">3</span>,ST_GeomFromText(<span class="string">'POINT(27.91162491 -33.01529)'</span>,<span class="number">4326</span>),<span class="string">'East London,SA'</span>);</span><br><span class="line"><span class="comment">/* 简单查询 */</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> cities;</span><br></pre></td></tr></table></figure>
<p>结果显示为下表:</p>
<pre><code>id |      name       |                      the_geom
----+-----------------+----------------------------------------------------
1 | London, England | 0101000020E6100000BBB88D06F016C0BF1B2FDD2406C14940
2 | London, Ontario | 0101000020E6100000F4FDD478E94E54C0E7FBA9F1D27D4540
3 | East London,SA  | 0101000020E610000040AB064060E93B4059FAD005F58140C0
(3 rows)
</code></pre><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">id</span>, ST_AsText(the_geom), ST_AsEwkt(the_geom), ST_X(the_geom), ST_Y(the_geom) <span class="keyword">FROM</span> cities;</span><br></pre></td></tr></table></figure>
<p>结果显示为下表:</p>
<pre><code>id |          st_astext           |               st_asewkt                |    st_x     |   st_y
----+------------------------------+----------------------------------------+-------------+-----------
1 | POINT(-0.1257 51.508)        | SRID=4326;POINT(-0.1257 51.508)        |     -0.1257 |    51.508
2 | POINT(-81.233 42.983)        | SRID=4326;POINT(-81.233 42.983)        |     -81.233 |    42.983
3 | POINT(27.91162491 -33.01529) | SRID=4326;POINT(27.91162491 -33.01529) | 27.91162491 | -33.01529
</code></pre><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*空间查询*/</span></span><br><span class="line"><span class="keyword">SELECT</span> p1.name,p2.name,ST_Distance_Sphere(p1.the_geom,p2.the_geom) <span class="keyword">FROM</span> cities <span class="keyword">AS</span> p1, cities <span class="keyword">AS</span> p2 <span class="keyword">WHERE</span> p1.id &gt; p2.id;</span><br></pre></td></tr></table></figure>
<pre><code>    name       |      name       | st_distance_sphere
-----------------+-----------------+--------------------
London, Ontario | London, England |   5875766.85191657
East London,SA  | London, England |   9789646.96784908
East London,SA  | London, Ontario |   13892160.9525778
(3 rows)
</code></pre><h3 id="5-2-PostGIS的Geometry数据类型"><a href="#5-2-PostGIS的Geometry数据类型" class="headerlink" title="5.2. PostGIS的Geometry数据类型"></a>5.2. PostGIS的Geometry数据类型</h3><p>Geometry可以说是PostGIS最重要的一个概念，是“几何体”的意思，由于PostGIS很好地遵守OGC的”Simple Feature for Specification for SQL”规范，目前支持的几何体类型包含其实例有：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POINT(1 1)</span><br><span class="line">MULTIPOINT(1 1, 3 4, -1 3)</span><br><span class="line">LINESTRING(1 1, 2 2, 3 4)</span><br><span class="line">POLYGON((0 0, 0 1, 1 1, 1 0, 0 0))</span><br><span class="line">MULTIPOLYGON((0 0, 0 1, 1 1, 1 0, 0 0), (5 5, 5 6, 6 6, 6 5, 5 5))</span><br><span class="line">MULTILINESTRING((1 1, 2 2, 3 4),(2 2, 3 3, 4 5))</span><br></pre></td></tr></table></figure></p>
<p>而geometry具体表现又有两种形式，一种叫做WKT(Well Known Text)形式，如上面的例子。或者使用如下SQL语句浏览：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> AsText(pt) <span class="keyword">from</span> test1;</span><br><span class="line"><span class="keyword">select</span> AddGeometryColumn(<span class="string">'test1'</span>,<span class="string">'pt'</span>,<span class="number">-1</span>,<span class="string">'GEOMETRY'</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure></p>
<p>另一种叫做“Canonical Form”形式，看上去是一串古怪的数字，其实是一种增强的十六进制编码，使用如下SQL语句就可以浏览了：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> pt <span class="keyword">from</span> test1;</span><br></pre></td></tr></table></figure></p>
<h3 id="5-3-PostGIS函数的分类"><a href="#5-3-PostGIS函数的分类" class="headerlink" title="5.3. PostGIS函数的分类"></a>5.3. PostGIS函数的分类</h3><p>PostGIS函数大致可以分为以下四类:</p>
<h4 id="5-3-1-字段处理函数"><a href="#5-3-1-字段处理函数" class="headerlink" title="5.3.1. 字段处理函数"></a>5.3.1. 字段处理函数</h4><p>这类函数当前一共有3个，分别是：</p>
<ul>
<li><p><code>AddGeometryColumn(var1,var2,var3,var4,var5,var6)</code>：<br>为已有的数据表增加一个地理几何数据字段。Var1代表数据表的模式(schema)的名字，一般是public，也可以省略，则使用当前的缺省模式；var2是已有的数据表的名字；var3是新的地理数据字段的名字；var4是SRID值，不确定的话就取-1吧；var5是地理数据的类型，可以是POINT等；var6是指该几何数据是二维还是三维数据。<br>前面的SQL语句<code>create table test1 (myID int4, pt geometry, myName varchar)</code>更规范的写法为：</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test1 (myID int4, myName <span class="built_in">varchar</span> );</span><br><span class="line"><span class="keyword">select</span> AddGeometryColumn(<span class="string">'test1'</span>,<span class="string">'pt'</span>,<span class="number">-1</span>,<span class="string">'GEOMETRY'</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>DropGeometryColumn</code> 函数：<br>显然是删除一个地理数据字段的；</p>
</li>
<li><code>SetSRID</code> 函数：<br>显然是设置SRID值的。<h4 id="5-3-2-几何关系函数"><a href="#5-3-2-几何关系函数" class="headerlink" title="5.3.2. 几何关系函数"></a>5.3.2. 几何关系函数</h4>这类函数目前共有10个，分别是：<br><code>Distance Equals Disjoint Intersects Touches Crosses Within Overlaps Contains Relate</code><h4 id="5-3-3-几何分析函数"><a href="#5-3-3-几何分析函数" class="headerlink" title="5.3.3. 几何分析函数"></a>5.3.3. 几何分析函数</h4>这类函数目前共有12个，分别是：<br><code>Centroid Area Lenth PointOnSurface Boundary Buffer ConvexHull Intersection SymDifference Difference GeomUnion MemGeomUnion</code><h4 id="5-3-4-读写函数"><a href="#5-3-4-读写函数" class="headerlink" title="5.3.4. 读写函数"></a>5.3.4. 读写函数</h4>这类函数很多，主要是用于在各种数据类型之间的转换，尤其是在于Geometry数据类型与其他如字符型等数据类型之间的转换，函数名如<code>AsText、GeomFromText</code>等，其作用是显然的。<h3 id="5-4-使用PostGIS扩展函数"><a href="#5-4-使用PostGIS扩展函数" class="headerlink" title="5.4. 使用PostGIS扩展函数"></a>5.4. 使用PostGIS扩展函数</h3>除了上述遵循OpenGIS的函数之外，PostGIS还自行扩展了一些当前OpenGIS规范之外的函数，主要包括以下几类：<h4 id="5-4-1-管理类函数"><a href="#5-4-1-管理类函数" class="headerlink" title="5.4.1. 管理类函数"></a>5.4.1. 管理类函数</h4>扩展的管理类函数主要包括一些软件版本查询函数，如postgis_version()、postgis_geos_version()、postgis_proj_version()函数等，分别查询当前的PostGIS的版本及其使用的Geos和Proj库的版本。<h4 id="5-4-2-数据类型的输入输出函数"><a href="#5-4-2-数据类型的输入输出函数" class="headerlink" title="5.4.2. 数据类型的输入输出函数"></a>5.4.2. 数据类型的输入输出函数</h4>除了OpenGIS定义的地理数据类型之外，PostGIS还对数据类型进行了扩展，这种扩展主要是两方面的扩展，一是把二维的数据向三维和四维扩展；二就是在WKT和WKB数据类型基础上扩展出EWKT和EWKB数据类型。PostGIS提供了在这些地理数据类型和常用数据类型如字符型、浮点型数据之间进行转换的函数。<h4 id="5-4-3-量算函数"><a href="#5-4-3-量算函数" class="headerlink" title="5.4.3. 量算函数"></a>5.4.3. 量算函数</h4>如length3d函数是对length2d函数的扩展。<h4 id="5-4-4-几何操作函数"><a href="#5-4-4-几何操作函数" class="headerlink" title="5.4.4. 几何操作函数"></a>5.4.4. 几何操作函数</h4>如addBBox(geometry)函数给所给的几何体加上一个边框。如simplify(geometry,tolerance)函数可以对折线和多边形利用Douglas-Peuker算法进行一些节点进行删除，从而使表现的图形更简单而清晰，在网络传输数据时具有更高的效率。<h4 id="5-4-5-PostGIS函数使用示例"><a href="#5-4-5-PostGIS函数使用示例" class="headerlink" title="5.4.5. PostGIS函数使用示例"></a>5.4.5. PostGIS函数使用示例</h4></li>
<li><p>integer ST_NPoints(geometry g1); 返回geometry中包含多少个point</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ST_NPoints(ST_GeomFromText(<span class="string">'LINESTRING(77.29 29.07,77.42 29.26,77.27 29.31,77.29 29.07)'</span>));</span><br><span class="line"><span class="comment">--result: 4</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>geometry ST_PointN(geometry a_linestring, integer n); 返回linestring中的第n个point</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ST_AsText(ST_PointN(ST_GeomFromText(<span class="string">'CIRCULARSTRING(1 2, 3 2, 1 2)'</span>),<span class="number">2</span>));</span><br><span class="line"><span class="comment">--result:POINT(3 2)</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="5-5-建立PostGIS索引"><a href="#5-5-建立PostGIS索引" class="headerlink" title="5.5. 建立PostGIS索引"></a>5.5. 建立PostGIS索引</h3><p>当数据库的记录增大的时候，如果没有建立索引的话，操作的效率就显著下降。POstGIS建议当记录数超过几千的时候就应该建立索引，而GIS数据库一般都是海量数据，所以对PostGIS而言，索引就非常重要。 </p>
<h2 id="6-参考资料"><a href="#6-参考资料" class="headerlink" title="6. 参考资料"></a>6. 参考资料</h2><ul>
<li><a href="https://zh.wikipedia.org/wiki/PostGIS" target="_blank" rel="noopener">PostGIS维基百科介绍</a>  </li>
<li><a href="https://live.osgeo.org/zh/quickstart/postgis_quickstart.html" target="_blank" rel="noopener">PostGIS快速入门</a>  </li>
<li><a href="http://blog.csdn.net/shixiaoguo90/article/details/30034429" target="_blank" rel="noopener">PostGIS简介</a>  </li>
<li><a href="http://www.cnblogs.com/LCGIS/archive/2013/03/08/2949119.html" target="_blank" rel="noopener">PostGIS管理函数</a></li>
</ul>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com../../2018/04/12/notebook/OSMandPostGISandMapMatcher/OSM 介绍与使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaiheng CHEN">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../timg.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="其鬼不神">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2018/04/12/notebook/OSMandPostGISandMapMatcher/OSM 介绍与使用/" itemprop="url">OSM 介绍与使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-12T14:33:09+08:00">
                2018-04-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/OSM/" itemprop="url" rel="index">
                    <span itemprop="name">OSM</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="OSM-介绍与使用"><a href="#OSM-介绍与使用" class="headerlink" title="OSM 介绍与使用"></a>OSM 介绍与使用</h1><!-- TOC -->
<ul>
<li><a href="#什么是osm">什么是OSM?</a></li>
<li><a href="#获取地图数据">获取地图数据</a></li>
<li><a href="#osm数据导入">osm数据导入</a><ul>
<li><a href="#centos-7-osm2pgsql安装">centos 7: osm2pgsql安装</a></li>
<li><a href="#ubuntu-osm2pgsql安装">ubuntu: osm2pgsql安装</a></li>
<li><a href="#导入地图数据">导入地图数据</a></li>
</ul>
</li>
<li><a href="#基于osm的开源导航服务">基于OSM的开源导航服务</a><ul>
<li><a href="#osrm安装">OSRM安装</a></li>
<li><a href="#导航api重要参数记录">导航API重要参数记录</a></li>
</ul>
</li>
<li><a href="#参考资料">参考资料</a></li>
</ul>
<!-- /TOC -->
<h2 id="什么是OSM"><a href="#什么是OSM" class="headerlink" title="什么是OSM?"></a>什么是OSM?</h2><p>开放街道地图（OpenStreetMap，简称OSM）是一个网上地图协作计划，目标是创造一个内容自由且能让所有人编辑的世界地图[wiki：<a href="http://wiki.openstreetmap.org/wiki/Main_Page].尤其值得称道的是，osm数据开源，可以自由下载使用。" target="_blank" rel="noopener">http://wiki.openstreetmap.org/wiki/Main_Page].尤其值得称道的是，osm数据开源，可以自由下载使用。</a></p>
<h2 id="获取地图数据"><a href="#获取地图数据" class="headerlink" title="获取地图数据"></a>获取地图数据</h2><p>获取地图数据主要分两种情况，获取大范围数据还是小范围数据。</p>
<p><strong>小范围数据的获取</strong>比较简单，基本<code>进入官网-&gt;点击导出-&gt;手动选择不同的区域-&gt;在地图选定导出范围-&gt;点击导出</code>就出来了。其实就是做了一个url请求，也可以根据在url中直接填写经纬度。</p>
<p><img src="export_osm_smallrange.png" alt="export osm data for small range"></p>
<p><strong>大范围数据的获取</strong> 有多种方式，主要参考上图中的篮框中的内容，这里不多记录，如果在地图中框选范围太大，导出失败，可以直接点击Overpass API的连接，就能够导出数据来了，数据格式可以定义为xml文件。另外，知乎上有个介绍写的很好，参考<a href="https://zhuanlan.zhihu.com/p/25889246" target="_blank" rel="noopener">获取OpenStreetMap（OSM）数据方法知多少？</a>，主要参考其中的第一种方法。</p>
<h2 id="osm数据导入"><a href="#osm数据导入" class="headerlink" title="osm数据导入"></a>osm数据导入</h2><h3 id="centos-7-osm2pgsql安装"><a href="#centos-7-osm2pgsql安装" class="headerlink" title="centos 7: osm2pgsql安装"></a>centos 7: osm2pgsql安装</h3><p>这个简直太神奇了，参照博客：<a href="http://www.cnblogs.com/think8848/p/6011073.html" target="_blank" rel="noopener">centos 7 osm2pgsql安装</a>。基本内容/过程没有问题，只是我安装过程中出现了这么几个问题。</p>
<ul>
<li>boost-devel版本太低</li>
<li>gcc版本太低</li>
<li>gcc多个版本存在选择最低的版本</li>
<li><code>make install</code>成功后运行<code>osm2pgsql -version</code>出现GLIBCXX问题</li>
</ul>
<p><strong>解决办法</strong>  </p>
<ol>
<li><p>升级boost-devel： </p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 主要是由于更新源的问题，有些源跟踪不到</span></span><br><span class="line"><span class="comment"># 大部分网址的推荐方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 我这里可以用的方法</span></span><br><span class="line">sudo wget https://bintray.com/vicendominguez/CentOS6/rpm -O etc/yum.repos.d/bintray-vicendominguez-CentOS6.repo</span><br><span class="line">sudo yum install boost-devel</span><br></pre></td></tr></table></figure>
</li>
<li><p>gcc升级版本（4.4.7 -&gt; 4.8.1）<br>centos 7最烦我的就是安装什么东西都需要源码安装，好烦的说。安装过程如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取源码</span></span><br><span class="line">wget http://ftp.gnu.org/gnu/gcc/gcc-4.8.1/gcc-4.8.1.tar.gz</span><br><span class="line">tar -xvzf gcc-4.8.1.tar.gz -C /opt/gcc</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载prerequisites时，如果连接不上服务地址</span></span><br><span class="line"><span class="comment"># 就去看一下这个文件的内容（下载，解压，建立连接，删除）</span></span><br><span class="line"><span class="comment"># 用别的方式下载一下。然后更改这个文件的内容。</span></span><br><span class="line"><span class="built_in">cd</span> /opt/gcc/gcc-4.8.1 </span><br><span class="line">./contrib/download_prerequisites  </span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ..  </span><br><span class="line">mkdir build_gcc_4.8.1 </span><br><span class="line"><span class="built_in">cd</span> build_gcc_4.8.1  </span><br><span class="line">../gcc-4.8.1/configure --<span class="built_in">enable</span>-checking=release --<span class="built_in">enable</span>-languages=c,c++ --<span class="built_in">disable</span>-multilib    </span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译时间很长</span></span><br><span class="line">make -j4  </span><br><span class="line">make install  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 升级版本</span></span><br><span class="line">/usr/sbin/update-alternatives --install  /usr/bin/gcc gcc /usr/<span class="built_in">local</span>/bin/x86_64-unknown-linux-gnu-gcc-4.8.1 40    </span><br><span class="line">/usr/sbin/update-alternatives --install /usr/bin/g++ g++ /usr/<span class="built_in">local</span>/bin/g++ 40</span><br></pre></td></tr></table></figure>
</li>
<li><p>改掉旧版本的链接文件</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 因为系统默认使用低版本的gcc，如果同时存在多个版本也会出问题，所以进行下面操作。</span></span><br><span class="line">mv /usr/bin/gcc /usr/bin/gcc4.4.7</span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/bin/gcc /usr/bin/gcc</span><br><span class="line">mv /usr/bin/g++ /usr/bin/g++4.4.7</span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/bin/g++ /usr/bin/g++</span><br><span class="line">mv /usr/bin/cc /usr/bin/cc4.4.7</span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/bin/cc /usr/bin/cc</span><br><span class="line">mv /usr/bin/c++ /usr/bin/c++4.4.7</span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/bin/c++ /usr/bin/c++</span><br></pre></td></tr></table></figure>
</li>
<li><p>对文件进行补充</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strings /usr/lib64/libstdc++.so.6|grep GLIBCXX</span><br></pre></td></tr></table></figure>
<pre><code>GLIBCXX_3.4
GLIBCXX_3.4.1
GLIBCXX_3.4.2
GLIBCXX_3.4.3
GLIBCXX_3.4.4
GLIBCXX_3.4.5
GLIBCXX_3.4.6  
GLIBCXX_3.4.7
GLIBCXX_3.4.8
GLIBCXX_3.4.9
GLIBCXX_3.4.10
GLIBCXX_3.4.11
GLIBCXX_3.4.12
GLIBCXX_3.4.13
GLIBCXX_FORCE_NEW
GLIBCXX_DEBUG_MESSAGE_LENGTH
</code></pre></li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 到编译时的目录下面找到文件：libstdc++.so.6.0.18</span></span><br><span class="line"><span class="comment"># 我编译的时候，建立build_gcc_4.8.1文件夹，具体方法参见：centos升级gcc到4.8.1</span></span><br><span class="line"><span class="comment"># 注意，进入目录是，.libs是隐藏的：</span></span><br><span class="line"><span class="comment"># /home/build_gcc_4.8.1/x86_64-unknown-linux-gnu/libstdc++-v3/src/.libs</span></span><br><span class="line"><span class="comment"># 用下面的命令查看：</span></span><br><span class="line">strings libstdc++.so.6.0.18|grep GLIBCXX</span><br><span class="line"></span><br><span class="line"><span class="comment"># 一般来讲，里面就有满足需要的GLIBCXX版本了。</span></span><br><span class="line"><span class="comment"># 然后，把该文件拷贝到了/usr/lib64下.</span></span><br><span class="line"><span class="comment"># 然后将libstdc++.so.6指向libstdc++.so.6.0.18:</span></span><br><span class="line">rm -r libstdc++.so.6</span><br><span class="line">ln -s libstdc++.so.6.0.18 libstdc++.so.6</span><br></pre></td></tr></table></figure>
<p>参考资料：</p>
<ul>
<li><a href="https://github.com/qiwsir/ITArticles/blob/master/Linux/How_to_solve_GLIBCXX_3.4.19.md" target="_blank" rel="noopener">How_to_solve_GLIBCXX_3.4.19</a></li>
<li><a href="https://blog.csdn.net/clirus/article/details/62424517" target="_blank" rel="noopener">CentOS gcc升级4.8步骤</a></li>
<li><a href="https://www.bbsmax.com/A/GBJrlMBd0e/" target="_blank" rel="noopener">CentOS7部署osm2pgsql</a></li>
</ul>
<h3 id="ubuntu-osm2pgsql安装"><a href="#ubuntu-osm2pgsql安装" class="headerlink" title="ubuntu: osm2pgsql安装"></a>ubuntu: osm2pgsql安装</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ubuntu版本安装就很简单了，一条命令</span></span><br><span class="line">apt-get intall osm2pgsql</span><br></pre></td></tr></table></figure>
<h3 id="导入地图数据"><a href="#导入地图数据" class="headerlink" title="导入地图数据"></a>导入地图数据</h3><p>地图数据导入pg数据库，使用osm2pgsql导入，命令类似于<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 如果出现ident authentication <span class="keyword">for</span> user postgres问题的话，su - postgres切换用户</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 但是需要注意postgres读取文件权限问题，把owner和group都改成postgres就好了。</span></span><br><span class="line">osm2pgsql -s -U postgres -d osm /tmp/map.xml -H 192.168.6.133 -W</span><br></pre></td></tr></table></figure></p>
<p><strong>注</strong>：osm2pgsql导入数据有两种模式， normal and slim mode。</p>
<ul>
<li><p>normal mode会在内存中产生如下三张中间表，并在导入结束后丢弃，因此速度较快。<br>planet_osm_nodes<br>planet_osm_ways<br>planet_osm_rels</p>
</li>
<li><p>而slim mode则将中间结果完全放置到数据库中。slim模式的好处是方便更新。</p>
</li>
</ul>
<p>两者使用的区别在于是否加“-s”，加了表示slim mode，本文使用slim mode。<br>使用slim mode导入数据后在数据库中会产生如下表。</p>
<p><img src="osm_table_imported.png" alt="osm数据导入后的表"></p>
<ul>
<li><p>三张临时表：planet_osm_nodes, planet_osm_ways, planet_osm_rels<br>需要注意的是nodes表中的lat和lon是bigint类型的数据，它们并不是经纬度的多少倍或是什么样子，而是一种表示方式（你可以认为是一种编码方式）。从bigint类型转换到经纬度编码的过程，在进行osm2pgsql的时候其实已经做了，只不过数据改存到了point表里面的way值中，这是一种geometry数据类型，更方便使用。这也是这张临时表没什么用的原因。</p>
</li>
<li><p>planet_osm_point<br>将原始geometry数据展示成4326（也就是wgs84标准）格式的经纬度的代码类似于：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ST_AsText(ST_Transform(way, <span class="number">4326</span>)) <span class="keyword">from</span> planet_osm_point <span class="keyword">where</span> osm_id = <span class="number">1422005356</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="基于OSM的开源导航服务"><a href="#基于OSM的开源导航服务" class="headerlink" title="基于OSM的开源导航服务"></a>基于OSM的开源导航服务</h2><p>基于OSM的开源导航服务有OSRM和GraphHopper。这里重点记录OSRM，项目放在了github上，叫做<a href="https://github.com/Project-OSRM/osrm-backend" target="_blank" rel="noopener">Open Source Routing Machine</a>。</p>
<p>官网地址：<a href="http://project-osrm.org/" target="_blank" rel="noopener">http://project-osrm.org/</a><br>API文档说明地址：<a href="http://project-osrm.org/docs/v5.10.0/api/#general-options" target="_blank" rel="noopener">http://project-osrm.org/docs/v5.10.0/api/#general-options</a></p>
<h3 id="OSRM安装"><a href="#OSRM安装" class="headerlink" title="OSRM安装"></a>OSRM安装</h3><p>参见github项目的<a href="https://github.com/Project-OSRM/osrm-backend" target="_blank" rel="noopener"><strong>README</strong></a>和<a href="https://my.oschina.net/u/1266171/blog/918232" target="_blank" rel="noopener">OSRM笔记</a>（博客），都写的很详细，后者基本是前者的翻译。</p>
<p>涉及的主要过程记录在下：<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install docker</span></span><br><span class="line"><span class="comment"># daocloud.io 国内镜像</span></span><br><span class="line">curl -sSL https://get.daocloud.io/docker | sh</span><br><span class="line"><span class="comment"># Download OpenStreetMap extracts for example from Geofabrik</span></span><br><span class="line">wget http://download.geofabrik.de/europe/germany/berlin-latest.osm.pbf</span><br><span class="line"><span class="comment"># Pre-process the extract with the car profile and start a routing engine HTTP server on port 5000</span></span><br><span class="line">docker run -t -v $(<span class="built_in">pwd</span>):/data osrm/osrm-backend osrm-extract -p /opt/car.lua /data/berlin-latest.osm.pbf</span><br><span class="line">docker run -t -v $(<span class="built_in">pwd</span>):/data osrm/osrm-backend osrm-partition /data/berlin-latest.osrm</span><br><span class="line">docker run -t -v $(<span class="built_in">pwd</span>):/data osrm/osrm-backend osrm-customize /data/berlin-latest.osrm</span><br><span class="line"></span><br><span class="line">docker run -t -i -p 5000:5000 -v $(<span class="built_in">pwd</span>):/data osrm/osrm-backend osrm-routed --algorithm mld /data/berlin-latest.osrm</span><br><span class="line"><span class="comment"># Make requests against the HTTP server</span></span><br><span class="line">curl <span class="string">"http://127.0.0.1:5000/route/v1/driving/13.388860,52.517037;13.385983,52.496891?steps=true"</span></span><br><span class="line"><span class="comment"># Optionally start a user-friendly frontend on port 9966, and open it up in your browser</span></span><br><span class="line">docker run -p 9966:9966 osrm/osrm-frontend</span><br><span class="line">xdg-open <span class="string">'http://127.0.0.1:9966'</span></span><br></pre></td></tr></table></figure></p>
<ul>
<li>几点说明</li>
</ul>
<ol>
<li><strong>customize过程</strong>比较费时，也比较占用计算资源。在10.1.1.58上运行china-latest时，这一步可以把32个cpu都用上，并且至少花费10分钟才能算完。</li>
<li><p><strong>遗留的问题</strong>：9966端口的页面可以展示，但是无法真正使用。</p>
<p> 不正常工作</p>
<p> <img src="osrm_route_exception.png" alt="route_exception"></p>
<p> 正常工作</p>
<p> <img src="osrm_route_workwell.png" alt="route_workwell"></p>
</li>
</ol>
<h3 id="导航API重要参数记录"><a href="#导航API重要参数记录" class="headerlink" title="导航API重要参数记录"></a>导航API重要参数记录</h3><p><a href="http://project-osrm.org/docs/v5.10.0/api/#general-options" target="_blank" rel="noopener">API文档</a>中的说明很详细，仔细读一遍就知道各个字段是什么意思了。</p>
<ul>
<li><p>RouteLeg对象中的annotations属性</p>
<p>  distance和duration单位分别为米和秒，speed单位米/秒，由distance/duration计算得到。nodes就是osm_node表中的id（也是osm_line表中的osm_id）</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"distance"</span>: <span class="number">30.0</span>,</span><br><span class="line">  <span class="attr">"duration"</span>: <span class="number">100.0</span>,</span><br><span class="line">  <span class="attr">"weight"</span>: <span class="number">100.0</span>,</span><br><span class="line">  <span class="attr">"steps"</span>: [],</span><br><span class="line">  <span class="attr">"annotation"</span>: &#123;</span><br><span class="line">    <span class="attr">"distance"</span>: [<span class="number">5</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">5</span>,<span class="number">5</span>],</span><br><span class="line">    <span class="attr">"duration"</span>: [<span class="number">15</span>,<span class="number">15</span>,<span class="number">40</span>,<span class="number">15</span>,<span class="number">15</span>],</span><br><span class="line">    <span class="attr">"datasources"</span>: [<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>],</span><br><span class="line">    <span class="attr">"nodes"</span>: [<span class="number">49772551</span>,<span class="number">49772552</span>,<span class="number">49786799</span>,<span class="number">49786800</span>,<span class="number">49786801</span>,<span class="number">49786802</span>],</span><br><span class="line">    <span class="attr">"speed"</span>: [<span class="number">0.3</span>, <span class="number">0.3</span>, <span class="number">0.3</span>, <span class="number">0.3</span>, <span class="number">0.3</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ol>
<li><a href="http://www.cnblogs.com/LBSer/p/4451471.html" target="_blank" rel="noopener">OSM入门+搭建地图服务</a>, 讲的很详细，值得参考一看</li>
<li><a href="https://gis.stackexchange.com/questions/163173/how-do-i-convert-the-coordinate-data-from-osm-into-actual-longitude-latitude-poi" target="_blank" rel="noopener">How do I convert the coordinate data from osm into actual longitude latitude points</a></li>
<li><a href="https://gis.stackexchange.com/questions/57003/what-format-is-lat-long-stored-in-osm-postgis" target="_blank" rel="noopener">What format is lat/long stored in OSM PostGIS?</a></li>
<li><a href="http://www.cnblogs.com/Micang/p/6346446.html" target="_blank" rel="noopener">OpenStreetMap、googleMap等经纬度和行列号之间相互转化</a></li>
</ol>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com../../2018/04/07/notebook/offer/leetcode/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaiheng CHEN">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../timg.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="其鬼不神">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2018/04/07/notebook/offer/leetcode/" itemprop="url">leetcode 题目与总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-07T20:54:24+08:00">
                2018-04-07
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/offer/" itemprop="url" rel="index">
                    <span itemprop="name">offer</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/offer/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="leetcode-题目与总结"><a href="#leetcode-题目与总结" class="headerlink" title="leetcode 题目与总结"></a>leetcode 题目与总结<!-- TOC --></h1><ul>
<li><a href="#1-二叉树">1. 二叉树</a><ul>
<li><a href="#11-前序遍历递归非递归">1.1. 前序遍历（递归、非递归）</a></li>
<li><a href="#12-中序遍历递归非递归">1.2. 中序遍历（递归、非递归）</a></li>
<li><a href="#13-后序遍历递归非递归">1.3. 后序遍历（递归、非递归）</a></li>
<li><a href="#14-层次遍历与层次输出">1.4. 层次遍历与层次输出</a></li>
<li><a href="#15-树的深度略">1.5. 树的深度（略）</a></li>
<li><a href="#16-对称树">1.6. 对称树</a></li>
<li><a href="#17-路径和略">1.7. 路径和（略）</a></li>
<li><a href="#18-中序遍历加后序遍历恢复原树结构">1.8. 中序遍历加后序遍历恢复原树结构</a></li>
<li><a href="#19-使用链表连接每一层">1.9. 使用链表连接每一层</a></li>
<li><a href="#110-给定一棵树和一个节点输出从根节点到这个节点的路径">1.10. 给定一棵树和一个节点，输出从根节点到这个节点的路径</a></li>
<li><a href="#111-两个节点的最小公共祖先">1.11. 两个节点的最小公共祖先</a></li>
<li><a href="#112-树的序列化和反序列化">1.12. 树的序列化和反序列化</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h2 id="1-二叉树"><a href="#1-二叉树" class="headerlink" title="1. 二叉树"></a>1. 二叉树</h2><h3 id="1-1-前序遍历（递归、非递归）"><a href="#1-1-前序遍历（递归、非递归）" class="headerlink" title="1.1. 前序遍历（递归、非递归）"></a>1.1. 前序遍历（递归、非递归）</h3><p>递归版本是最基本的了。非递归的版本需要使用stack来保存访问的路径。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">preorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        <span class="comment">// method 1</span></span><br><span class="line">        <span class="comment">// preorderTraversalIter(root,list);</span></span><br><span class="line">        <span class="comment">// method 2</span></span><br><span class="line">        Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> Stack&lt;TreeNode&gt;();</span><br><span class="line">        <span class="keyword">while</span>(root != <span class="keyword">null</span> || !stack.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">if</span>(root != <span class="keyword">null</span>)&#123;</span><br><span class="line">                stack.push(root);</span><br><span class="line">                list.add(root.val);</span><br><span class="line">                root = root.left;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                root = stack.pop().right;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">preorderTraversalIter</span><span class="params">(TreeNode root, List&lt;Integer&gt; list)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root != <span class="keyword">null</span>)</span><br><span class="line">            list.add(root.val);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span>(root.left != <span class="keyword">null</span>)</span><br><span class="line">            preorderTraversalIter(root.left, list);</span><br><span class="line">        <span class="keyword">if</span>(root.right != <span class="keyword">null</span>)</span><br><span class="line">            preorderTraversalIter(root.right, list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="1-2-中序遍历（递归、非递归）"><a href="#1-2-中序遍历（递归、非递归）" class="headerlink" title="1.2. 中序遍历（递归、非递归）"></a>1.2. 中序遍历（递归、非递归）</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">inorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        <span class="comment">// method 1</span></span><br><span class="line">        <span class="comment">// inorderTraversalIter(root,list);</span></span><br><span class="line">        <span class="comment">// method 2</span></span><br><span class="line">        Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> Stack&lt;TreeNode&gt;();</span><br><span class="line">        <span class="keyword">while</span>(root != <span class="keyword">null</span> || !stack.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">if</span>(root != <span class="keyword">null</span>)&#123;</span><br><span class="line">                stack.push(root);</span><br><span class="line">                root = root.left;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                root = stack.pop();</span><br><span class="line">                list.add(root.val);</span><br><span class="line">                root = root.right;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">inorderTraversalIter</span><span class="params">(TreeNode root, List&lt;Integer&gt; list)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(root.left != <span class="keyword">null</span>)</span><br><span class="line">                inorderTraversalIter(root.left, list);</span><br><span class="line">            list.add(root.val);</span><br><span class="line">            <span class="keyword">if</span>(root.right != <span class="keyword">null</span>)</span><br><span class="line">                inorderTraversalIter(root.right, list);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-3-后序遍历（递归、非递归）"><a href="#1-3-后序遍历（递归、非递归）" class="headerlink" title="1.3. 后序遍历（递归、非递归）"></a>1.3. 后序遍历（递归、非递归）</h3><p>后序遍历其实是镜像+颠倒版的前序遍历。使用右先前序遍历（先访问右节点）思想，最后倒着输出。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">postorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();</span><br><span class="line">        <span class="comment">// method 1</span></span><br><span class="line">        <span class="comment">// postorderTraversalIter(root,list);</span></span><br><span class="line">        <span class="comment">// method 2</span></span><br><span class="line">        Stack&lt;TreeNode&gt; stack = <span class="keyword">new</span> Stack&lt;TreeNode&gt;();</span><br><span class="line">        <span class="keyword">while</span>(root != <span class="keyword">null</span> || !stack.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">if</span>(root != <span class="keyword">null</span>)&#123;</span><br><span class="line">                stack.push(root);</span><br><span class="line">                list.add(<span class="number">0</span>, root.val);</span><br><span class="line">                root = root.right;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                root = stack.pop();</span><br><span class="line">                root = root.left;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postorderTraversalIter</span><span class="params">(TreeNode root, List&lt;Integer&gt; list)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(root.left != <span class="keyword">null</span>)</span><br><span class="line">                postorderTraversalIter(root.left, list);</span><br><span class="line">            <span class="keyword">if</span>(root.right != <span class="keyword">null</span>)</span><br><span class="line">                postorderTraversalIter(root.right, list);</span><br><span class="line">            list.add(root.val);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="1-4-层次遍历与层次输出"><a href="#1-4-层次遍历与层次输出" class="headerlink" title="1.4. 层次遍历与层次输出"></a>1.4. 层次遍历与层次输出</h3><p>层次遍历很简单，使用队列辅助就行了。但是如何进行层次输出呢？这就是102号题目：<a href="https://leetcode.com/problems/binary-tree-level-order-traversal/description/" target="_blank" rel="noopener">Binary Tree Level Order Traversal</a>。思路如下。</p>
<p>思路1：递归。设置level记录层数。每进行一次子节点访问，层数加1。不同层用不同list存储。具体见代码。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root) &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; levelList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        helper(root, levelList, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">return</span> levelList;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">helper</span><span class="params">(TreeNode node, List&lt;List&lt;Integer&gt;&gt; levelList, <span class="keyword">int</span> level)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span> (levelList.size() &lt;= level) &#123;</span><br><span class="line">            levelList.add(<span class="keyword">new</span> ArrayList&lt;Integer&gt;());</span><br><span class="line">        &#125;</span><br><span class="line">        levelList.get(level).add(node.val);</span><br><span class="line">        helper(node.left, levelList, level+<span class="number">1</span>);</span><br><span class="line">        helper(node.right, levelList, level+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>思路2：迭代。记录上下两层的数量。使用队列进行存储，但是记录前一层和当前层分别有多少个节点被存储了。当前一层还剩下0个节点的时候，存储成新的list。详见代码。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root) &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; lists = <span class="keyword">new</span> ArrayList&lt;List&lt;Integer&gt;&gt;();</span><br><span class="line">        Queue&lt;TreeNode&gt; queue = <span class="keyword">new</span> LinkedList&lt;TreeNode&gt;();</span><br><span class="line">        <span class="keyword">int</span> preCount=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> curCount=<span class="number">0</span>;</span><br><span class="line">        List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root != <span class="keyword">null</span>)&#123;</span><br><span class="line">            queue.offer(root);</span><br><span class="line">            preCount++;</span><br><span class="line">            <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">                TreeNode node = queue.poll();</span><br><span class="line">                list.add(node.val);</span><br><span class="line">                preCount--;</span><br><span class="line">                <span class="keyword">if</span>(node.left != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    queue.offer(node.left);</span><br><span class="line">                    curCount++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(node.right != <span class="keyword">null</span>)&#123;</span><br><span class="line">                    queue.offer(node.right);</span><br><span class="line">                    curCount++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(preCount == <span class="number">0</span>)&#123;</span><br><span class="line">                    lists.add(<span class="keyword">new</span> ArrayList(list));</span><br><span class="line">                    list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">                    preCount = curCount;</span><br><span class="line">                    curCount = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> lists;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>思路3：迭代。双队列，第一个队列存储已经访问过的上一层的节点值，第二个队列存储当前访问层的节点值。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root) &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; res=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span>(root==<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> res;</span><br><span class="line">        &#125;</span><br><span class="line">        Queue&lt;TreeNode&gt; queue=<span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">        queue.add(root);</span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">            List&lt;Integer&gt; list=<span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            Queue&lt;TreeNode&gt; temp=<span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">            <span class="keyword">while</span>(!queue.isEmpty())&#123;</span><br><span class="line">                TreeNode node=queue.poll();</span><br><span class="line">                list.add(node.val);</span><br><span class="line">                <span class="keyword">if</span>(node.left!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                    temp.add(node.left);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(node.right!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                    temp.add(node.right);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            res.add(list);</span><br><span class="line">            queue=temp;     </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="1-5-树的深度（略）"><a href="#1-5-树的深度（略）" class="headerlink" title="1.5. 树的深度（略）"></a>1.5. 树的深度（略）</h3><h3 id="1-6-对称树"><a href="#1-6-对称树" class="headerlink" title="1.6. 对称树"></a>1.6. 对称树</h3><p>判断两棵子树是否对称是关键点，其它就是使用这个方法进行递归了。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSymmetric</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(root == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">return</span> isEqual(root.left, root.right);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEqual</span><span class="params">(TreeNode left, TreeNode right)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(left == <span class="keyword">null</span> &amp;&amp; right == <span class="keyword">null</span>)</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(left == <span class="keyword">null</span> || right == <span class="keyword">null</span>)</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span>(left.val != right.val)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> isEqual(left.left, right.right) &amp;&amp; isEqual(left.right, right.left);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="1-7-路径和（略）"><a href="#1-7-路径和（略）" class="headerlink" title="1.7. 路径和（略）"></a>1.7. 路径和（略）</h3><h3 id="1-8-中序遍历加后序遍历恢复原树结构"><a href="#1-8-中序遍历加后序遍历恢复原树结构" class="headerlink" title="1.8. 中序遍历加后序遍历恢复原树结构"></a>1.8. 中序遍历加后序遍历恢复原树结构</h3><p>需要对中后序遍历的关系搞得非常清楚才能写出这样的代码。真的很神奇。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> p_inorder, p_postorder;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">buildTree</span><span class="params">(<span class="keyword">int</span>[] inorder, <span class="keyword">int</span>[] postorder)</span> </span>&#123;</span><br><span class="line">        p_inorder = inorder.length - <span class="number">1</span>;</span><br><span class="line">        p_postorder = postorder.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> buildTree(inorder, postorder, <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">buildTree</span><span class="params">(<span class="keyword">int</span>[] inorder, <span class="keyword">int</span>[] postorder, TreeNode end)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(p_postorder &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        TreeNode root = <span class="keyword">new</span> TreeNode(postorder[p_postorder]);</span><br><span class="line">        p_postorder--;</span><br><span class="line">        <span class="comment">// 判断是否存在右节点</span></span><br><span class="line">        <span class="keyword">if</span>(inorder[p_inorder] != root.val)</span><br><span class="line">            root.right = buildTree(inorder, postorder, root);</span><br><span class="line">        p_inorder--;</span><br><span class="line">        <span class="comment">// 判断是否存在左点， 当end==null时都是一棵左子树开始创建的时候</span></span><br><span class="line">        <span class="keyword">if</span>(end == <span class="keyword">null</span> || inorder[p_inorder] != end.val)</span><br><span class="line">            root.left = buildTree(inorder, postorder, end);</span><br><span class="line">        <span class="keyword">return</span> root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="1-9-使用链表连接每一层"><a href="#1-9-使用链表连接每一层" class="headerlink" title="1.9. 使用链表连接每一层"></a>1.9. 使用链表连接每一层</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="comment">// for complete binary tree</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connect</span><span class="params">(TreeLinkNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>( root == <span class="keyword">null</span> )</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span>( root.left != <span class="keyword">null</span> )&#123;</span><br><span class="line">            root.left.next = root.right;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>( root.right != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>( root.next != <span class="keyword">null</span> )&#123;</span><br><span class="line">                root.right.next = root.next.left;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        connect( root.left );</span><br><span class="line">        connect( root.right );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// for normal binary tree</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connect</span><span class="params">(TreeLinkNode root)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>( root == <span class="keyword">null</span> )</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">if</span>( root.left != <span class="keyword">null</span> )&#123;</span><br><span class="line">            root.left.next = root.right;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>( root.right != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>( root.next != <span class="keyword">null</span> )&#123;</span><br><span class="line">                root.right.next = root.next.left;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        connect( root.left );</span><br><span class="line">        connect( root.right );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-10-给定一棵树和一个节点，输出从根节点到这个节点的路径"><a href="#1-10-给定一棵树和一个节点，输出从根节点到这个节点的路径" class="headerlink" title="1.10. 给定一棵树和一个节点，输出从根节点到这个节点的路径"></a>1.10. 给定一棵树和一个节点，输出从根节点到这个节点的路径</h3><p>思路就是，首先判断边界条件，如果根节点或者目标节点为空的话，就不用找了。正常情况下，使用一个列表记录路径，这个列表也相当于一个栈，使用遍历（回溯）的方法。当前节点不为空，入栈，如果栈顶节点等于目标节点，则找到了。如果不等于则需要判断是否需要出栈，情况有2，第一种，如果当前节点已经是叶节点了，出栈；第二种，如果当前节点的左右子树都没有找到这个节点，出栈。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">findPath</span><span class="params">(TreeNode root, TreeNode target, List&lt;TreeNode&gt; list)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> found = <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(root == <span class="keyword">null</span> || target == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> found;</span><br><span class="line">    list.add(root);</span><br><span class="line">    <span class="keyword">if</span> (root == target) &#123;</span><br><span class="line">        found = <span class="keyword">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">boolean</span> leftFound = <span class="keyword">false</span>, rightFound = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (root.left == <span class="keyword">null</span> &amp;&amp; root.right == <span class="keyword">null</span>) &#123;</span><br><span class="line">            list.remove(list.size() - <span class="number">1</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            leftFound = findPath(root.left, target, list);</span><br><span class="line">            rightFound = findPath(root.right, target, list);</span><br><span class="line">            found = (leftFound || rightFound);</span><br><span class="line">            <span class="keyword">if</span> (!found)</span><br><span class="line">                list.remove(list.size() - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> found;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="1-11-两个节点的最小公共祖先"><a href="#1-11-两个节点的最小公共祖先" class="headerlink" title="1.11. 两个节点的最小公共祖先"></a>1.11. 两个节点的最小公共祖先</h3><blockquote>
<p>If the current (sub)tree contains both p and q, then the function result is their LCA. If only one of them is in that subtree, then the result is that one of them. If neither are in that subtree, the result is null/None/nil.</p>
</blockquote>
<p>算法的整体思路是：以当前节点为父节点（或者叫祖先节点），看它的左右两棵子树是否都包含p和q，由于p和q使用的是对象等于判断方法，所以如果两棵子树都包含的话，必定分别包含p和q，则直接返回当前节点。如果都不包含，那就是没有。如果一个包含一个不包含，返回包含的那个节点。</p>
<p>但是注意：这种编程方法只适合于两个节点都存在于树中的情况。如果有一个不存在的话输出的结果是有问题的。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">lowestCommonAncestor</span><span class="params">(TreeNode root, TreeNode p, TreeNode q)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (root == <span class="keyword">null</span> || root == p || root == q) <span class="keyword">return</span> root;</span><br><span class="line">        TreeNode left = lowestCommonAncestor(root.left, p, q);</span><br><span class="line">        TreeNode right = lowestCommonAncestor(root.right, p, q);</span><br><span class="line">        <span class="keyword">return</span> left == <span class="keyword">null</span> ? right : right == <span class="keyword">null</span> ? left : root;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="1-12-树的序列化和反序列化"><a href="#1-12-树的序列化和反序列化" class="headerlink" title="1.12. 树的序列化和反序列化"></a>1.12. 树的序列化和反序列化</h3><p>思路是将叶节点的子节点（null)也记录在案，这样无论是哪种遍历顺序（前中后，层次）都方便恢复。这里选择前序遍历进行序列化，反序列化就是前序遍历结果的反推。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Encodes a tree to a single string.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">serialize</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (root == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"N,"</span>;</span><br><span class="line">    String res = root.val + <span class="string">","</span>;</span><br><span class="line">    res += serialize(root.left);</span><br><span class="line">    res += serialize(root.right);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Decodes your encoded data to tree.</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">deserialize</span><span class="params">(String data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (data.length() &lt;= <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">// method 1</span></span><br><span class="line">    <span class="comment">// String[] vals = data.split(",");</span></span><br><span class="line">    <span class="comment">// return deserializeCore(vals);</span></span><br><span class="line">    <span class="comment">// method 2</span></span><br><span class="line">    <span class="keyword">return</span> deserializeCore2(<span class="keyword">new</span> StringBuilder(data));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">deserializeCore</span><span class="params">(String[] data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (MyCounter.count &gt;= data.length)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    String valStr = data[MyCounter.count];</span><br><span class="line">    MyCounter.count++;</span><br><span class="line">    <span class="keyword">if</span> (valStr.equals(<span class="string">"N"</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    TreeNode node = <span class="keyword">new</span> TreeNode(Integer.parseInt(valStr));</span><br><span class="line">    node.left = deserializeCore(data);</span><br><span class="line">    node.right = deserializeCore(data);</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">deserializeCore2</span><span class="params">(StringBuilder data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (data.length() &lt;= <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">int</span> idx = data.indexOf(<span class="string">","</span>);</span><br><span class="line">    String valStr = data.substring(<span class="number">0</span>, idx);</span><br><span class="line">    data.delete(<span class="number">0</span>, idx + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (valStr.equals(<span class="string">"N"</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    TreeNode node = <span class="keyword">new</span> TreeNode(Integer.parseInt(valStr));</span><br><span class="line">    node.left = deserializeCore2(data);</span><br><span class="line">    <span class="comment">// data.delete(0, data.indexOf(",") + 1);</span></span><br><span class="line">    node.right = deserializeCore2(data);</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCounter</span> </span>&#123;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com../../2018/04/02/notebook/linux和操作系统/os/随笔/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaiheng CHEN">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../timg.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="其鬼不神">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2018/04/02/notebook/linux和操作系统/os/随笔/" itemprop="url">操作系统随笔</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-02T17:13:51+08:00">
                2018-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/操作系统/" itemprop="url" rel="index">
                    <span itemprop="name">操作系统</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/操作系统/随笔/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="操作系统随笔"><a href="#操作系统随笔" class="headerlink" title="操作系统随笔"></a>操作系统随笔</h1><!-- TOC -->
<ul>
<li><a href="#1-锁的概念以及死锁的概念">1. 锁的概念以及死锁的概念</a></li>
<li><a href="#2-计算机ip保留地址">2. 计算机IP保留地址</a></li>
</ul>
<!-- /TOC -->
<h2 id="1-锁的概念以及死锁的概念"><a href="#1-锁的概念以及死锁的概念" class="headerlink" title="1. 锁的概念以及死锁的概念"></a>1. 锁的概念以及死锁的概念</h2><ul>
<li><p>牛客网参考答案：<a href="https://www.nowcoder.com/ta/review-java/review?page=16" target="_blank" rel="noopener">JAVA面试常考知识点：page16</a></p>
<blockquote>
<p>所谓死锁是指多个进 程因竞争资源而造成的一种僵局（互相等待），若无外力作用，这些进程都将无法向前推进。死锁产生的4个必要条件：</p>
<ul>
<li>互斥条件：进程要求对所分配的资源（如打印机）进行排他性控制，即在一段时间内某 资源仅为一个进程所占有。此时若有其他进程请求该资源，则请求进程只能等待。</li>
<li>不剥夺条件：进程所获得的资源在未使用完毕之前，不能被其他进程强行夺走，即只能 由获得该资源的进程自己来释放（只能是主动释放)。</li>
<li>请求和保持条件：进程已经保持了至少一个资源，但又提出了新的资源请求，而该资源 已被其他进程占有，此时请求进程被阻塞，但对自己已获得的资源保持不放。</li>
<li>循环等待条件：存在一种进程资源的循环等待链，链中每一个进程已获得的资源同时被 链中下一个进程所请求。</li>
</ul>
</blockquote>
</li>
<li><p>如何解决死锁问题</p>
</li>
</ul>
<p>目标就是破坏产生死锁的四个条件，一般最后一个条件比较容易破坏，也就是所有锁的需求都是按照一定顺序来的。可参考：<a href="https://www.jianshu.com/p/44125bb12ebf" target="_blank" rel="noopener">死锁是什么？如何避免死锁？</a></p>
<h2 id="2-计算机IP保留地址"><a href="#2-计算机IP保留地址" class="headerlink" title="2. 计算机IP保留地址"></a>2. 计算机IP保留地址</h2><p>参考文章：<a href="http://www.cnblogs.com/ZJoy/archive/2011/03/24/1994308.html" target="_blank" rel="noopener">IP地址中的保留地址</a><br>根据用途和安全性级别的不同，IP地址还可以大致分为两类：公共地址和私有地址。</p>
<ul>
<li>公用地址在Internet中使用，可以在Internet中随意访问。</li>
<li>私有地址只能在内部网络中使用，只有通过代理服务器才能与Internet通信。</li>
</ul>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com../../2018/04/02/notebook/data_struc_algo/sortsummary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaiheng CHEN">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../timg.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="其鬼不神">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2018/04/02/notebook/data_struc_algo/sortsummary/" itemprop="url">各种排序方法的简单总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-02T17:13:51+08:00">
                2018-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/数据结构与算法/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构与算法</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="各种排序方法的简单总结"><a href="#各种排序方法的简单总结" class="headerlink" title="各种排序方法的简单总结"></a>各种排序方法的简单总结</h1><p>排序算法算是计算机的经典算法，解决很多问题的时候排序算法的思想都值得参考。<br><!-- TOC --></p>
<ul>
<li><a href="#1-快速排序的思想">1. 快速排序的思想</a></li>
<li><a href="#2-归并排序的思想">2. 归并排序的思想</a></li>
<li><a href="#3-堆排序的思路">3. 堆排序的思路</a></li>
</ul>
<!-- /TOC -->
<h2 id="1-快速排序的思想"><a href="#1-快速排序的思想" class="headerlink" title="1. 快速排序的思想"></a>1. 快速排序的思想</h2><p>学习容易记住的快排算法过程（Partition函数式最重要的，有两种写法，一种高效，另一种普通，参考<a href="http://selfboot.cn/2016/09/01/lost_partition/" target="_blank" rel="noopener">这里</a>）<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main sort function</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">qsort</span><span class="params">(<span class="keyword">int</span>* arr, <span class="keyword">int</span> len, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(start == end)</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	<span class="keyword">int</span> index = partition(arr, len, start, end);</span><br><span class="line">	print_arr(arr, len);</span><br><span class="line">	<span class="keyword">if</span>(index &gt; start)</span><br><span class="line">		qsort(arr, len, start, index - <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">if</span>(index &lt; end)</span><br><span class="line">		qsort(arr, len, index + <span class="number">1</span>, end);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// partition function 1</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>* arr, <span class="keyword">int</span> len, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(arr == <span class="literal">NULL</span> || start &lt; <span class="number">0</span> || end &lt; <span class="number">0</span> || end &gt;= len || end &lt; start)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"partition input invalid\n"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> pivot = arr[end];</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> small = start - <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">for</span>(i = start; i &lt; end; i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(arr[i] &lt; pivot)&#123;</span><br><span class="line">			small++;</span><br><span class="line">			<span class="keyword">if</span>(i != small)</span><br><span class="line">				swap(&amp;arr[small], &amp;arr[i]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	small++;</span><br><span class="line">	swap(&amp;arr[small], &amp;arr[end]);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> small;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// partition function which is more efficient</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>* arr, <span class="keyword">int</span> len, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(arr == <span class="literal">NULL</span> || start &lt; <span class="number">0</span> || end &lt; <span class="number">0</span> || end &gt;= len || end &lt; start)&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"partition input invalid\n"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">int</span> pivot = arr[end];</span><br><span class="line">	start--;</span><br><span class="line">	<span class="keyword">while</span>(start &lt; end)&#123;</span><br><span class="line">		<span class="keyword">while</span>(start &lt; end &amp;&amp; arr[++start] &lt;= pivot);</span><br><span class="line">		arr[end] = arr[start];</span><br><span class="line">		<span class="keyword">while</span>(start &lt; end &amp;&amp; arr[--end] &gt;= pivot);</span><br><span class="line">		arr[start] = arr[end];</span><br><span class="line">	&#125;</span><br><span class="line">	arr[start] = pivot;</span><br><span class="line">	<span class="keyword">return</span> start;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="2-归并排序的思想"><a href="#2-归并排序的思想" class="headerlink" title="2. 归并排序的思想"></a>2. 归并排序的思想</h2><p>归并排序就是将数组分成两个部分，然后分别对两个部分进行排序，然后再融合起来。可以递归实现，算法时间复杂度时O(nlogn)，空间复杂度O(n)，也就是需要辅助空间。</p>
<h2 id="3-堆排序的思路"><a href="#3-堆排序的思路" class="headerlink" title="3. 堆排序的思路"></a>3. 堆排序的思路</h2><p>参考：<a href="http://bubkoo.com/2014/01/14/sort-algorithm/heap-sort/" target="_blank" rel="noopener">常见排序算法 - 堆排序 (Heap Sort)</a></p>
<p>堆排序就是把最大堆堆顶的最大数取出，将剩余的堆继续调整为最大堆，再次将堆顶的最大数取出，这个过程持续到剩余数只有一个时结束。在堆中定义以下几种操作：</p>
<ul>
<li>最大堆调整（Max-Heapify）：将堆的末端子节点作调整，使得子节点永远小于父节点</li>
<li>创建最大堆（Build-Max-Heap）：将堆所有数据重新排序，使其成为最大堆</li>
<li>堆排序（Heap-Sort）：移除位在第一个数据的根节点，并做最大堆调整的递归运算</li>
</ul>
<p>最大堆调整（MAX‐HEAPIFY）的作用是保持最大堆的性质，是创建最大堆的核心子程序。下面是Java版本的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="comment">/* 堆排序的思路：</span></span><br><span class="line"><span class="comment"> * 1. 首先明确堆是一种数据结构，利用堆这种数据结构的特性可以很高效地做排序算法。</span></span><br><span class="line"><span class="comment"> * 2. 第一步：堆化。将原本不是堆结构的数组转换成堆，方法时从第一个不是叶节点的节点开始，到根节点，进行堆化操作。堆化操作就是数字的上浮和下沉，要注意的是下沉要彻底，也就是需要递归或者迭代处理下沉的点。</span></span><br><span class="line"><span class="comment"> * 3. 第二步：排序。以最大堆为例，堆顶（也就是树结构的根节点，也就是数组第一个元素）存的是最大值，堆顶元素与最末尾叶节点交换，交换后堆就不是最大堆了，需要重新调整，但是调整的时候就不管最后一个元素了，所以堆的长度减少1。循环此过程直到堆内只剩下一个元素。排序完成。</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HeapSortWiki</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span>[] arr;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">HeapSortWiki</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.arr = arr;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 堆排序的主要入口方法，共两步。</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * 第一步：将数组堆化 beginIndex = 第一个非叶子节点。 从第一个非叶子节点开始即可。无需从最后一个叶子节点开始。</span></span><br><span class="line"><span class="comment">		 * 叶子节点可以看作已符合堆要求的节点，根节点就是它自己且自己以下值为最大。</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="keyword">int</span> len = arr.length - <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">int</span> beginIndex = (len - <span class="number">1</span>) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = beginIndex; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">			maxHeapify(i, len);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">/*</span></span><br><span class="line"><span class="comment">		 * 第二步：对堆化数据排序 每次都是移出最顶层的根节点A[0]，与最尾部节点位置调换，同时遍历长度 - 1。</span></span><br><span class="line"><span class="comment">		 * 然后从新整理被换到根节点的末尾元素，使其符合堆的特性。 直至未排序的堆长度为 0。</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = len; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">			swap(<span class="number">0</span>, i);</span><br><span class="line">			maxHeapify(<span class="number">0</span>, i - <span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> temp = arr[i];</span><br><span class="line">		arr[i] = arr[j];</span><br><span class="line">		arr[j] = temp;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 调整索引为 index 处的数据，使其符合堆的特性。</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> index</span></span><br><span class="line"><span class="comment">	 *            需要堆化处理的数据的索引</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> len</span></span><br><span class="line"><span class="comment">	 *            未排序的堆（数组）的长度</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">maxHeapify</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">int</span> len)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> li = (index &lt;&lt; <span class="number">1</span>) + <span class="number">1</span>; <span class="comment">// 左子节点索引</span></span><br><span class="line">		<span class="keyword">int</span> ri = li + <span class="number">1</span>; <span class="comment">// 右子节点索引</span></span><br><span class="line">		<span class="keyword">int</span> cMax = li; <span class="comment">// 子节点值最大索引，默认左子节点。</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (li &gt; len)</span><br><span class="line">			<span class="keyword">return</span>; <span class="comment">// 左子节点索引超出计算范围，直接返回。</span></span><br><span class="line">		<span class="keyword">if</span> (ri &lt;= len &amp;&amp; arr[ri] &gt; arr[li]) <span class="comment">// 先判断左右子节点，哪个较大。</span></span><br><span class="line">			cMax = ri;</span><br><span class="line">		<span class="keyword">if</span> (arr[cMax] &gt; arr[index]) &#123;</span><br><span class="line">			swap(cMax, index); <span class="comment">// 如果父节点被子节点调换，</span></span><br><span class="line">			maxHeapify(cMax, len); <span class="comment">// 则需要继续判断换下后的父节点是否符合堆的特性。</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * 测试用例</span></span><br><span class="line"><span class="comment">	 * </span></span><br><span class="line"><span class="comment">	 * 输出： [0, 0, 0, 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4, 5, 5, 5, 6, 6, 6, 7, 7,</span></span><br><span class="line"><span class="comment">	 * 7, 8, 8, 8, 9, 9, 9]</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123; <span class="number">3</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">4</span>, <span class="number">7</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">0</span>, <span class="number">2</span>,</span><br><span class="line">				<span class="number">6</span> &#125;;</span><br><span class="line">		<span class="keyword">new</span> HeapSortWiki(arr).sort();</span><br><span class="line">		System.out.println(Arrays.toString(arr));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com../../2018/04/02/notebook/data_struc_algo/data structure/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaiheng CHEN">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../timg.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="其鬼不神">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2018/04/02/notebook/data_struc_algo/data structure/" itemprop="url">数据结构与算法随笔</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-02T17:13:51+08:00">
                2018-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/随笔/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Data-Struture-Note"><a href="#Data-Struture-Note" class="headerlink" title="Data Struture Note"></a>Data Struture Note</h1><!-- TOC -->
<ul>
<li><a href="#1-如何解决hash冲突有哪几种方案">1. 如何解决<code>hash</code>冲突，有哪几种方案</a><ul>
<li><a href="#11-开放定址法">1.1. 开放定址法</a></li>
<li><a href="#12-链地址法拉链法">1.2. 链地址法（拉链法）</a></li>
<li><a href="#13-再哈希法">1.3. 再哈希法</a></li>
<li><a href="#14-建立公共溢出区">1.4. 建立公共溢出区</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h2 id="1-如何解决hash冲突，有哪几种方案"><a href="#1-如何解决hash冲突，有哪几种方案" class="headerlink" title="1. 如何解决hash冲突，有哪几种方案"></a>1. 如何解决<code>hash</code>冲突，有哪几种方案</h2><p>参考：<a href="https://www.jianshu.com/p/4d3cb99d7580" target="_blank" rel="noopener">解决哈希冲突的常用方法分析</a></p>
<h3 id="1-1-开放定址法"><a href="#1-1-开放定址法" class="headerlink" title="1.1. 开放定址法"></a>1.1. 开放定址法</h3><ul>
<li>线性探查法：找到下一个有空的位置放进去，查找的时候遍历（其实也可以有一个辅助的数组专门记录移动的位置），这个方法容易出现“聚集”的现象</li>
<li>平方探查法：二次探测法的地址增量序列为 di = 12， -12， 22， -22，… ， q2, -q2 (q &lt;= m/2)。二次探测能有效避免“聚集”现象，但是不能够探测到哈希表上所有的存储单元，但是至少能够探测到一半。若探查到一半单元仍找不到一个空闲单元，表明此散列表太满，应该重新建立。</li>
<li>双散列函数探查法： hp (key)若h(key)出现冲突，则再使用hp (key)求取散列地址。探查序列为：<code>h(k), h(k)+ hp(k),…, h((k)+ i*hp(k))</code>。</li>
</ul>
<h3 id="1-2-链地址法（拉链法）"><a href="#1-2-链地址法（拉链法）" class="headerlink" title="1.2. 链地址法（拉链法）"></a>1.2. 链地址法（拉链法）</h3><p><code>Java</code>中<code>HashMap</code>的经典实现算法。</p>
<h3 id="1-3-再哈希法"><a href="#1-3-再哈希法" class="headerlink" title="1.3. 再哈希法"></a>1.3. 再哈希法</h3><p>当发生冲突时，使用第二个、第三个、哈希函数计算地址，直到无冲突时。缺点：计算时间增加。</p>
<h3 id="1-4-建立公共溢出区"><a href="#1-4-建立公共溢出区" class="headerlink" title="1.4. 建立公共溢出区"></a>1.4. 建立公共溢出区</h3><p>将哈希表分为公共表和溢出表，当溢出发生时，将所有溢出数据统一放到溢出区。</p>

          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com../../2018/04/02/notebook/offer/面试随笔/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaiheng CHEN">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="../../timg.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="其鬼不神">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../2018/04/02/notebook/offer/面试随笔/" itemprop="url">面试随笔</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-04-02T16:39:28+08:00">
                2018-04-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/面试/" itemprop="url" rel="index">
                    <span itemprop="name">面试</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="../../categories/面试/随笔/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="面试随笔"><a href="#面试随笔" class="headerlink" title="面试随笔"></a>面试随笔</h1><p>记录一些在面试过程中遇到的问题</p>
<!-- TOC -->
<ul>
<li><a href="#1-程序lang掉无响应">1. 程序lang掉（无响应）</a></li>
<li><a href="#3-网易的两道题">3. 网易的两道题</a><ul>
<li><a href="#31-符合nk的数对有多少种">3.1. 符合n，k的数对有多少种</a></li>
<li><a href="#32-有多少种装法">3.2. 有多少种装法</a></li>
</ul>
</li>
<li><a href="#腾讯面试题">腾讯面试题</a><ul>
<li><a href="#带符号大数加减">带符号大数加减</a></li>
</ul>
</li>
<li><a href="#阿里电话面试">阿里电话面试</a><ul>
<li><a href="#jstorm流程-和-jstorm-slotworker和task的关系">JStorm流程 和 JStorm Slot、Worker和task的关系</a></li>
<li><a href="#b树为什么适合数据库为什么快">B+树为什么适合数据库，为什么快</a></li>
<li><a href="#红黑树的五个特点">红黑树的五个特点</a></li>
<li><a href="#hbase流程">HBase流程</a></li>
<li><a href="#kafka数据压缩">kafka数据压缩</a></li>
<li><a href="#java-线程池">java 线程池</a></li>
<li><a href="#tcp三次握手和四次挥手详细过程及状态变化">tcp三次握手和四次挥手详细过程及状态变化</a></li>
</ul>
</li>
<li><a href="#阿里第二次电话面">阿里第二次电话面</a><ul>
<li><a href="#hashmap使用类的实例作为key需要注意哪些内容">HashMap使用类的实例作为Key需要注意哪些内容</a></li>
<li><a href="#如何优化一个链表使得查询效率变高">如何优化一个链表使得查询效率变高</a></li>
</ul>
</li>
<li><a href="#阿里第三次电话面">阿里第三次电话面</a><ul>
<li><a href="#字符串匹配算法">字符串匹配算法</a></li>
</ul>
</li>
<li><a href="#阿里第四次电话面">阿里第四次电话面</a><ul>
<li><a href="#数据库的索引结构">数据库的索引结构？</a></li>
<li><a href="#操作系统中的虚拟内存的概念">操作系统中的虚拟内存的概念</a></li>
<li><a href="#网络中tcpip和http的关系java网络编程的知识">网络中TCP/IP和http的关系（Java网络编程的知识）</a></li>
<li><a href="#socket与session的区别">socket与session的区别</a></li>
<li><a href="#java多线程">java多线程</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h2 id="1-程序lang掉（无响应）"><a href="#1-程序lang掉（无响应）" class="headerlink" title="1. 程序lang掉（无响应）"></a>1. 程序lang掉（无响应）</h2><h2 id="3-网易的两道题"><a href="#3-网易的两道题" class="headerlink" title="3. 网易的两道题"></a>3. 网易的两道题</h2><h3 id="3-1-符合n，k的数对有多少种"><a href="#3-1-符合n，k的数对有多少种" class="headerlink" title="3.1. 符合n，k的数对有多少种"></a>3.1. 符合n，k的数对有多少种</h3><h3 id="3-2-有多少种装法"><a href="#3-2-有多少种装法" class="headerlink" title="3.2. 有多少种装法"></a>3.2. 有多少种装法</h3><h2 id="腾讯面试题"><a href="#腾讯面试题" class="headerlink" title="腾讯面试题"></a>腾讯面试题</h2><h3 id="带符号大数加减"><a href="#带符号大数加减" class="headerlink" title="带符号大数加减"></a>带符号大数加减</h3><h2 id="阿里电话面试"><a href="#阿里电话面试" class="headerlink" title="阿里电话面试"></a>阿里电话面试</h2><h3 id="JStorm流程-和-JStorm-Slot、Worker和task的关系"><a href="#JStorm流程-和-JStorm-Slot、Worker和task的关系" class="headerlink" title="JStorm流程 和 JStorm Slot、Worker和task的关系"></a>JStorm流程 和 JStorm Slot、Worker和task的关系</h3><h3 id="B-树为什么适合数据库，为什么快"><a href="#B-树为什么适合数据库，为什么快" class="headerlink" title="B+树为什么适合数据库，为什么快"></a>B+树为什么适合数据库，为什么快</h3><ul>
<li>为什么B+树索引结构是存储在磁盘上的？</li>
<li>为什么比B树更好？<h3 id="红黑树的五个特点"><a href="#红黑树的五个特点" class="headerlink" title="红黑树的五个特点"></a>红黑树的五个特点</h3></li>
</ul>
<h3 id="HBase流程"><a href="#HBase流程" class="headerlink" title="HBase流程"></a>HBase流程</h3><h3 id="kafka数据压缩"><a href="#kafka数据压缩" class="headerlink" title="kafka数据压缩"></a>kafka数据压缩</h3><h3 id="java-线程池"><a href="#java-线程池" class="headerlink" title="java 线程池"></a>java 线程池</h3><h3 id="tcp三次握手和四次挥手详细过程及状态变化"><a href="#tcp三次握手和四次挥手详细过程及状态变化" class="headerlink" title="tcp三次握手和四次挥手详细过程及状态变化"></a>tcp三次握手和四次挥手详细过程及状态变化</h3><h2 id="阿里第二次电话面"><a href="#阿里第二次电话面" class="headerlink" title="阿里第二次电话面"></a>阿里第二次电话面</h2><h3 id="HashMap使用类的实例作为Key需要注意哪些内容"><a href="#HashMap使用类的实例作为Key需要注意哪些内容" class="headerlink" title="HashMap使用类的实例作为Key需要注意哪些内容"></a>HashMap使用类的实例作为Key需要注意哪些内容</h3><p>需要注意的是，HashMap里面的Key和Value其实可以是自定义的类的实例。</p>
<ul>
<li>但是这个类的必须实现<code>hashCode()</code>和<code>equals()</code>方法，原因可想而知</li>
<li><code>hashCode()</code>在进行put和get的时候至关重要</li>
<li><code>equals()</code>则在get的时候发挥作用。</li>
<li>这里<code>hashCode()</code>方法也需要注意：对于同一个对象，hashcode需要是<strong>不可变</strong>的。</li>
<li>如果是可变的，当我们把这个key的引用进行一定的操作之后，导致hashcode变化了，那可能永远都找不到这个元素了。<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可以，但是ClassA需要一定的注意事项</span></span><br><span class="line">hashMap.put(<span class="keyword">instanceof</span>(ClassA), value);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="如何优化一个链表使得查询效率变高"><a href="#如何优化一个链表使得查询效率变高" class="headerlink" title="如何优化一个链表使得查询效率变高"></a>如何优化一个链表使得查询效率变高</h3><p>答案就是跳表啊。<a href="../data_struc_algo/跳跃表.md">数据结构与算法：跳跃表</a></p>
<h2 id="阿里第三次电话面"><a href="#阿里第三次电话面" class="headerlink" title="阿里第三次电话面"></a>阿里第三次电话面</h2><h3 id="字符串匹配算法"><a href="#字符串匹配算法" class="headerlink" title="字符串匹配算法"></a>字符串匹配算法</h3><h2 id="阿里第四次电话面"><a href="#阿里第四次电话面" class="headerlink" title="阿里第四次电话面"></a>阿里第四次电话面</h2><h3 id="数据库的索引结构？"><a href="#数据库的索引结构？" class="headerlink" title="数据库的索引结构？"></a>数据库的索引结构？</h3><h3 id="操作系统中的虚拟内存的概念"><a href="#操作系统中的虚拟内存的概念" class="headerlink" title="操作系统中的虚拟内存的概念"></a>操作系统中的虚拟内存的概念</h3><h3 id="网络中TCP-IP和http的关系（Java网络编程的知识）"><a href="#网络中TCP-IP和http的关系（Java网络编程的知识）" class="headerlink" title="网络中TCP/IP和http的关系（Java网络编程的知识）"></a>网络中TCP/IP和http的关系（Java网络编程的知识）</h3><p>参考资料：</p>
<ul>
<li><a href="https://blog.csdn.net/qq_35181209/article/details/75212533" target="_blank" rel="noopener">TCP/IP、Http、Socket的关系理解</a></li>
<li><a href="https://www.jianshu.com/p/a5410f895d6b" target="_blank" rel="noopener">懵逼的HTTP、Socket与TCP</a></li>
</ul>
<p>TPC/IP协议是传输层协议，主要解决数据如何在网络中传输，而HTTP是应用层协议，主要解决如何包装数据。</p>
<p><img src="https://raw.githubusercontent.com/zqjflash/tcp-ip-protocal/master/tcp-ip-protocal.png" alt="TCP/IP协议栈"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/735757-e38faee729cc7dfc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/540" alt="TCP/IP协议族中的位置关系"></p>
<h3 id="socket与session的区别"><a href="#socket与session的区别" class="headerlink" title="socket与session的区别"></a>socket与session的区别</h3><p>参考资料：</p>
<ul>
<li><a href="https://juejin.im/entry/5766c29d6be3ff006a31b84e" target="_blank" rel="noopener">Cookie 与 Session 的区别</a></li>
</ul>
<p>总结来看：</p>
<ul>
<li>Session是在服务端保存的一个数据结构，用来跟踪用户的状态，这个数据可以保存在集群、数据库、文件中；</li>
<li>Cookie是客户端保存用户信息的一种机制，用来记录用户的一些信息，也是实现Session的一种方式。</li>
</ul>
<h3 id="java多线程"><a href="#java多线程" class="headerlink" title="java多线程"></a>java多线程</h3>
          
        
      
    </div>
    
    
    
    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../../"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="page-number current">2</span><a class="page-number" href="../3/">3</a><span class="space">&hellip;</span><a class="page-number" href="../7/">7</a><a class="extend next" rel="next" href="../3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="../../timg.jpg"
                alt="Kaiheng CHEN" />
            
              <p class="site-author-name" itemprop="name">Kaiheng CHEN</p>
              <p class="site-description motion-element" itemprop="description">道莅天下，其鬼不神</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="../../archives/">
              
                  <span class="site-state-item-count">62</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="../../categories/index.html">
                  <span class="site-state-item-count">33</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="../../tags/index.html">
                  <span class="site-state-item-count">56</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/chen-kh" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:zhongfajean@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kaiheng CHEN</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>


  <span class="post-meta-divider">|</span>

<div class="powered-by">
<i class="fa fa-user-md"></i>
  <span id="busuanzi_container_site_uv">
    本站访客数:<span id="busuanzi_value_site_uv"></span>
  </span>
  <span class="post-meta-divider">|</span>
  <span id="busuanzi_container_site_pv">
      本站总访问量<span id="busuanzi_value_site_pv"></span>次
  </span>
</div>

  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="../../lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
